{% extends 'admin.html.twig' %}

{% block title %}{% if app.request.attributes.get('_route') == 'app_secretariat_student_classes_create' %}Créer une classe {% else %}
	Modifier la classe {% endif %}{% endblock %}

{% block stylesheets %}
<link href="https://cdn.jsdelivr.net/npm/tom-select@2.0.0/dist/css/tom-select.css" rel="stylesheet">

{% endblock %}
{% block body %}

{{ form_start(form) }}
        {{ form_row(form.name) }}
        {{ form_row(form.students) }}

		{% if app.request.attributes.get('_route') == 'app_secretariat_student_classes_edit' %}
			<button type="submit" class="btn primary-custom-button">Modifier la classe</button>
		{% else %}
			<button type="submit" class="btn primary-custom-button">Créer la classe</button>
		{% endif %}

{{ form_end(form) }}

{% endblock %}

{% block javascripts %}
<script src="https://cdn.jsdelivr.net/npm/tom-select@2.0.0/dist/js/tom-select.complete.min.js"></script>
	<script>
        window.onload = () => {
			function bindSelect (select) {
				new TomSelect(select, {
					hideSelected: true,
					closeAfterSelect: true,
					maxOptions: 20,
					plugins: {
						remove_button: {
							title: 'Supprimer l\'équipement'
						}
					}
				})
			}
			Array.from(document.querySelectorAll('select[multiple]')).map(bindSelect)

			
        }
    </script>
{% endblock %}
